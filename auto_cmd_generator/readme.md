# auto_cmd_generator

## ステッパーステートについて

- OwnGiri: 自陣のワークにギリギリぶつからない高さ（把持待機状態）
- OwnCatch: 自陣ワークを取るときの高さ
- CmnGiri: 共通のワークにギリギリぶつからない高さ（把持待機状態）
- CmnCatch: 共通のワークを取るときの高さ
- CmnAbove: 共通のワークを引き抜くのに必要な高さ
- ShtGiri: シューティングボックス似移動するときの壁にギリギリぶつからない高さ
- Shoot: 把持を離すときの高さ
- ShtAbove: シュートしたワークにギリギリぶつからない高さ

**追加が必要かもしれないやつ**

- ShootTouch: 揺れ抑制用に地面にこする高さ

## 状態について

- Init: 初期状態(高さは自陣ギリ)
- MoveToOwnWork: 自陣エリアへ移動（高さは自陣ギリ）
- CatchOwn: 自陣の把持（高さは自陣キャチ）
- MoveToWaypoint: ウェイポイントへ移動（共通エリアの）(高さは共通ギリ)
- MoveToCmnWait: 共通エリア待機状態へ移動(高さは共通ギリ)
- MoveToCmnWork: 共通エリア上空へ移動（高さは共通ギリ）
- CatchCmn: 共通の把持（高さは共通キャチ）
- CmnAbove: ワークの抜き出し(高さは共通抜けられるくらい)
- MoveToShotBox: シューティングボックス前へ移動(高さは共通ギリ)
- MoveToRelease: シュートしに行く（高さは地面）
- MoveToBonus: ボーナスエリアへ行く（高さは地面）
- Release: リリース（高さはワークに当たらない）

## indexの各特殊値
- own_area_index=0: 競技開始時の位置
- cmn_area_index=0: ウェイポイント
- sht_area_index=0: シューティングボックス前

## 状態遷移
### 初期ステート（Init）
初期位置。STARTボタンでMoveToWaitへ。
### 待機状態（MoveToWait）
 一番ロボットに近い列を奥側のハンドで取るとき以外は共通エリアに入る必要があるので、このステートで進入可能なX座標にしてからワークを取りに行く

- 位置を左右（X方向）にずらす：左右十字
- このまま奥のハンドで端っこを取る（1個目と妨害で全く共通に入れないとき）
- 自陣エリアに進入：
- 共通エリアに進入：

### 自陣ワークへ移動（MoveToOwnWork）
自陣のワークへ移動。ワークの角度によって微妙に位置調整が必要
- 到着したら把持動作へ

### 自陣ワーク把持（OwnCatch）
自陣のワークを把持（下ろすー＞掴む）。
- 擦りながら次のワークへ
- シューティングボックス方面への移動に向けて上げる

### 自陣ワークスリ移動（MoveOwnY）
X方向固定でY方向にスリ移動
- 次のワークへ（持ち上げてから）

### 自陣ワーク持ち上げ（OwnAbove）
自陣のワークを持ち上げる（ステッパーが早ければ廃止）
- 次のワークへ（前が自陣ワークスリ移動のとき）
- シューティングボックスへ（特に何もないとき）
- レールへ（把持機構前方にまだワークがあるとき）

### 共通ワークへ移動（MoveToCmnWork）
共通のワークへ移動。ワークの角度によっては微妙に位置調整が必要
- 到着したら把持動作へ

### 共通ワーク把持（CmnCatch）
共通のワークを把持（下ろすー＞つかむ）・
- 持ち上げ

### 共通ワーク持ち上げ（CmnAbove）
共通のワークを持ち上げる。
- 貯蓄へ

### 共通ワーク貯蔵待機（StoreWait）
回転させながら共通のワークを自陣へ移動
- アームを下げる（置くor拾う）
- 隣へ行く
- 帰る

### 共通ワーク貯蓄（Store）
アームを下げてboolを反転（持ってたら置くし、持ってなかったら拾う）
- 貯蓄待機へ

### レールへ移動（MoveToRail）
自陣の他ワークに干渉しないY座標までワークを移動させる
- シューティングボックスへ

### シューティングボックスへ（MoveToSht）
シューティングボックスへ移動。シューティングボックス上空にきたらZを下げたい。
- ボーナスへ入れる
- そのままシュート

### ボーナスエリアへ（MoveToBns）
ボーナスエリアへ移動。ボーナスエリア上空にきたらZを下げたい。
- シュート

### シュート（Shoot）
手を離して持ち上げる。
- 待機へ